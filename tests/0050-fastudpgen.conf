%info
FastUDPFlows Generation Speed

%script
click -c 0x1 -n 4 -- CONFIG || click -j 1 CONFIG

%variables
L=[64*1024]
BURST=[1*256]

%config
var_names={L:Length,BURST:Burst}
n_runs=5
var_serie=BURST

%file CONFIG
define ($mac0 aa:bb:cc:dd:ee:f0)
define ($mac1 aa:bb:cc:dd:ee:f1)
define ($ip0 10.19.0.1)
define ($ip1 10.19.0.2)

fu0 :: FastUDPFlows(RATE 0, LIMIT -1, LENGTH $L, SRCETH $mac0, DSTETH $mac1, SRCIP $ip0, DSTIP $ip1, FLOWS 1, FLOWSIZE 100)
    -> ac :: AverageCounter
	-> Unqueue($BURST)
    -> Discard;

finish :: Script(TYPE ACTIVE,
			wait 1s,
			print "RESULT $(mul $(ac.byte_rate) 8)",
			stop);
